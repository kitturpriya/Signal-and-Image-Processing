# -*- coding: utf-8 -*-
"""LaplacianFilter.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1ShH3mt_meXh-GHXweo5Zd-dbnc-UXrCu

![image.png](data:image/png;base64,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)
"""

#IMPORTS

import pandas as pd
import matplotlib.pyplot as plt   #plotting and showing images
import numpy as np #operations on array
import cv2 #reading images

import warnings
warnings.filterwarnings("ignore")

#Read Image

img = cv2.imread("/content/coins.png", 0)  #Read Image
plt.imshow(img, cmap = 'gray')             #Show Image

plt.imshow(img, cmap = 'gray')                       #Show Image

#Negative Laplacian Mask

negmask = 4 * np.array([[0, -1, 0], [-1, 4, -1], [0, -1, 0]])
print(negmask)

#Positive Laplacian Mask

posmask = 4 * np.array([[0, 1, 0], [1, -4, 1], [0, 1, 0]])
print(posmask)

mask = 3  #size of mask 
threshold = 50  #threshold value

#Function Defination for Laplacian Edge Detection
def laplace(img1, mask, lpa_mask):
  img2 = img1.copy()
  skip = mask//2        #Leaving the boundary pixels
  m, n = img1.shape

  for i in range(skip, m - skip):
    for j in range(skip, n - skip):
      temp = img1[i - skip : i + skip + 1, j - skip: j + skip +1]
      temp1 = temp  * lpa_mask
      sum = abs(temp1.sum())
      temp2 = np.zeros((mask,mask))
      if sum >= threshold:
        x,y = np.where(temp == np.max(temp))   #Finding the coordinate of highest intensity value
        temp2[x,y] = 255      
      
      img2[i - mask//2 : i + mask//2 + 1, j - mask//2: j + mask//2 +1] = temp2
  
  return img2

#For Positve Laplacian Mask
im1 = laplace(img, mask, posmask)

#For Negative Laplacian Mask
im2 = laplace(img, mask, negmask)

#Subplots

fig = plt.figure(figsize = (20, 20))

plt.subplot(1,3,1)
plt.imshow(img, cmap = 'gray')
plt.title('Original Image')

plt.subplot(1,3,2)
plt.imshow(im1, cmap = 'gray')
plt.title('Positive Masked Image')

plt.subplot(1,3,3)
plt.imshow(im2, cmap = 'gray')
plt.title('Negative Masked Image')

#Using Built-In Function

def laplacian(filepathname):
    v = cv2.imread(filepathname)
    s = cv2.cvtColor(v, cv2.COLOR_BGR2GRAY)
    s = cv2.Laplacian(s, cv2.CV_16S, ksize=3)
    s = cv2.convertScaleAbs(s)
    plt.imshow(s, cmap = 'gray')
    return s

filepathname = "/content/coins.png"
laplacian(filepathname)

! jupyter nbconvert --to html /content/I039,_I057,_I063,_I078_SIP_SELF_LAB.ipynb

"""##**Conclusion**: 
####Implemented the Laplacian Filter using the negative and positive laplacian masks therefore obtaining the edge detection output of the input image. Initially understood the difference between the concept of an edge and a line, and also generated 3X3 Laplacian masks. This determines if the change in adjacent pixel values is from an edge or continuous progression. However, in its original form as laplacian is a second derivative mask, it is very sensitive to noise. Thus if an image contains noise, the laplacian gives very large values and also ruins the image in the process. 
####Also implemented the Laplacian operator using the inbuilt cv2 library to compare the results. This output can further be used for object detection and data extraction. Such a filtered output will be a great input image for a Machine Learning Image Classifier.

##**Link**: 

###https://colab.research.google.com/drive/1ShH3mt_meXh-GHXweo5Zd-dbnc-UXrCu?usp=sharing

### Lab Writeup

###https://docs.google.com/document/d/1-OHIY7eyh1Jx_8coTAOtbw-dcYT610-Z7OSG4XWyBFs/edit?usp=sharing
"""